<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>üß† –ò–ò –ù–∞—Å—Ç–∞–≤–Ω–∏–∫ –ú–∏–ª–ª–∏–∞—Ä–¥–µ—Ä–æ–≤</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- 3D Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    
    <!-- Database -->
    <script src="https://unpkg.com/dexie@3.2.4/dist/dexie.js"></script>
    
    <!-- Audio for TTS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/6.6.3/wavesurfer.min.js"></script>
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
    <div id="main-screen" class="screen active">
        <div class="nav-header">
            <div class="logo">üß† –ò–ò –ù–∞—Å—Ç–∞–≤–Ω–∏–∫</div>
            <button class="btn-secondary" onclick="showScreen('settings-screen')">‚öôÔ∏è</button>
        </div>
        <div class="main-content">
            <h1>üëë –ù–∞—Å—Ç–∞–≤–Ω–∏–∫–∏ –ú–∏–ª–ª–∏–∞—Ä–¥–µ—Ä—ã</h1>
            <p class="subtitle">–ü–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –æ—Ç —Å–∞–º—ã—Ö –±–æ–≥–∞—Ç—ã—Ö –ª—é–¥–µ–π –º–∏—Ä–∞</p>
            
            <div class="mentor-preview">
                <div class="mentor-avatar">ü§ñ</div>
                <div class="preview-text">
                    <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–µ–≥–æ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞</h3>
                    <p>–ò–ª–æ–Ω –ú–∞—Å–∫, –ë–∏–ª–ª –ì–µ–π—Ç—Å, –î–∂–µ—Ñ –ë–µ–∑–æ—Å, –£–æ—Ä—Ä–µ–Ω –ë–∞—Ñ—Ñ–µ—Ç</p>
                </div>
            </div>
            
            <button class="btn-primary" onclick="showScreen('mentor-select-screen')">
                üöÄ –í—ã–±—Ä–∞—Ç—å –ù–∞—Å—Ç–∞–≤–Ω–∏–∫–∞
            </button>
            
            <div class="features">
                <div class="feature">
                    <div class="feature-icon">üéØ</div>
                    <div class="feature-text">
                        <h4>3D –ê–≤–∞—Ç–∞—Ä—ã</h4>
                        <p>–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ 3D –º–æ–¥–µ–ª–∏</p>
                    </div>
                </div>
                <div class="feature">
                    <div class="feature-icon">üó£Ô∏è</div>
                    <div class="feature-text">
                        <h4>–ì–æ–ª–æ—Å–æ–≤–æ–µ –æ–±—â–µ–Ω–∏–µ</h4>
                        <p>–ì–æ–≤–æ—Ä–∏—Ç–µ –∏ —Å–ª—É—à–∞–π—Ç–µ</p>
                    </div>
                </div>
                <div class="feature">
                    <div class="feature-icon">üß†</div>
                    <div class="feature-text">
                        <h4>–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</h4>
                        <p>–ò–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–Ω—Ç–µ—Ä–≤—å—é</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –í—ã–±–æ—Ä –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞ -->
    <div id="mentor-select-screen" class="screen">
        <div class="nav-header">
            <button class="btn-secondary" onclick="showScreen('main-screen')">‚Üê –ù–∞–∑–∞–¥</button>
            <h2>–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞</h2>
            <div></div>
        </div>
        <div class="main-content">
            <div class="mentors-grid">
                <div class="mentor-card" onclick="selectMentor('elon')">
                    <div class="mentor-photo">üöÄ</div>
                    <h3>–ò–ª–æ–Ω –ú–∞—Å–∫</h3>
                    <p class="mentor-title">CEO Tesla & SpaceX</p>
                    <p class="mentor-specialty">–ò–Ω–Ω–æ–≤–∞—Ü–∏–∏ ‚Ä¢ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ ‚Ä¢ –ö–æ—Å–º–æ—Å</p>
                    <div class="mentor-stats">
                        <span class="stat">üí∞ $240 –º–ª—Ä–¥</span>
                        <span class="stat">‚≠ê 4.9/5</span>
                    </div>
                </div>
                
                <div class="mentor-card" onclick="selectMentor('bill')">
                    <div class="mentor-photo">üíª</div>
                    <h3>–ë–∏–ª–ª –ì–µ–π—Ç—Å</h3>
                    <p class="mentor-title">–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å Microsoft</p>
                    <p class="mentor-specialty">–ë–∏–∑–Ω–µ—Å ‚Ä¢ –§–∏–ª–∞–Ω—Ç—Ä–æ–ø–∏—è ‚Ä¢ –ò–¢</p>
                    <div class="mentor-stats">
                        <span class="stat">üí∞ $130 –º–ª—Ä–¥</span>
                        <span class="stat">‚≠ê 4.8/5</span>
                    </div>
                </div>
                
                <div class="mentor-card" onclick="selectMentor('bezos')">
                    <div class="mentor-photo">üì¶</div>
                    <h3>–î–∂–µ—Ñ—Ñ –ë–µ–∑–æ—Å</h3>
                    <p class="mentor-title">–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å Amazon</p>
                    <p class="mentor-specialty">E-commerce ‚Ä¢ –õ–æ–≥–∏—Å—Ç–∏–∫–∞ ‚Ä¢ –ö–æ—Å–º–æ—Å</p>
                    <div class="mentor-stats">
                        <span class="stat">üí∞ $170 –º–ª—Ä–¥</span>
                        <span class="stat">‚≠ê 4.7/5</span>
                    </div>
                </div>
                
                <div class="mentor-card" onclick="selectMentor('buffett')">
                    <div class="mentor-photo">üìà</div>
                    <h3>–£–æ—Ä—Ä–µ–Ω –ë–∞—Ñ—Ñ–µ—Ç</h3>
                    <p class="mentor-title">–ò–Ω–≤–µ—Å—Ç–æ—Ä Berkshire</p>
                    <p class="mentor-specialty">–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ ‚Ä¢ –§–∏–Ω–∞–Ω—Å—ã ‚Ä¢ –°—Ç—Ä–∞—Ç–µ–≥–∏—è</p>
                    <div class="mentor-stats">
                        <span class="stat">üí∞ $120 –º–ª—Ä–¥</span>
                        <span class="stat">‚≠ê 4.9/5</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –æ–±—â–µ–Ω–∏—è —Å –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–º -->
    <div id="chat-screen" class="screen">
        <div class="nav-header">
            <button class="btn-secondary" onclick="showScreen('mentor-select-screen')">üëë</button>
            <div class="mentor-info">
                <span id="currentMentorName">–ò–ª–æ–Ω –ú–∞—Å–∫</span>
                <div class="status-indicator online"></div>
            </div>
            <button class="btn-secondary" onclick="showScreen('settings-screen')">‚öôÔ∏è</button>
        </div>
        
        <div class="main-content">
            <!-- 3D Avatar Area -->
            <div class="avatar-container">
                <div id="avatar-canvas"></div>
                <div class="avatar-controls">
                    <button class="avatar-btn" onclick="toggleAvatarAnimation()">
                        <span id="animationToggle">‚è∏Ô∏è</span>
                    </button>
                    <div class="emotion-indicator">
                        <span id="currentEmotion">üòä –î—Ä—É–∂–µ–ª—é–±–Ω—ã–π</span>
                    </div>
                </div>
            </div>
            
            <!-- Chat Messages -->
            <div class="chat-messages" id="chatMessages">
                <div class="message mentor-message">
                    <div class="message-avatar">üöÄ</div>
                    <div class="message-content">
                        <p>–ü—Ä–∏–≤–µ—Ç! –Ø –ò–ª–æ–Ω –ú–∞—Å–∫. –ì–æ—Ç–æ–≤ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º –æ–ø—ã—Ç–æ–º —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–π –±—É–¥—É—â–µ–≥–æ. –û —á–µ–º —Ö–æ—á–µ—à—å –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å?</p>
                        <div class="message-time">—Ç–æ–ª—å–∫–æ —á—Ç–æ</div>
                    </div>
                </div>
            </div>
            
            <!-- Input Area -->
            <div class="input-area">
                <div class="input-container">
                    <button class="voice-btn" onclick="startVoiceInput()" id="voiceBtn">
                        üé§
                    </button>
                    <input type="text" 
                           id="messageInput" 
                           placeholder="–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫—É..." 
                           onkeypress="handleInputKeypress(event)">
                    <button class="send-btn" onclick="sendMessage()">
                        ‚û§
                    </button>
                </div>
                <div class="quick-questions">
                    <button class="quick-btn" onclick="askQuickQuestion('–ö–∞–∫ –Ω–∞—á–∞—Ç—å –±–∏–∑–Ω–µ—Å?')">
                        –ö–∞–∫ –Ω–∞—á–∞—Ç—å –±–∏–∑–Ω–µ—Å?
                    </button>
                    <button class="quick-btn" onclick="askQuickQuestion('–ö–∞–∫ –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–µ–±—è?')">
                        –ö–∞–∫ –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–µ–±—è?
                    </button>
                    <button class="quick-btn" onclick="askQuickQuestion('–ö–∞–∫ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è?')">
                        –ö–∞–∫ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è?
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <div id="settings-screen" class="screen">
        <div class="nav-header">
            <button class="btn-secondary" onclick="goBackFromSettings()">‚Üê –ù–∞–∑–∞–¥</button>
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
            <div></div>
        </div>
        <div class="main-content">
            <div class="settings-panel">
                <div class="setting-group">
                    <h3>üîä –ó–≤—É–∫ –∏ –≥–æ–ª–æ—Å</h3>
                    <div class="setting-item">
                        <span>–ì—Ä–æ–º–∫–æ—Å—Ç—å –≥–æ–ª–æ—Å–∞</span>
                        <input type="range" id="volumeSlider" min="0" max="100" value="70">
                    </div>
                    <div class="setting-item">
                        <span>–°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏</span>
                        <input type="range" id="speedSlider" min="0.5" max="2" value="1" step="0.1">
                    </div>
                    <div class="setting-item">
                        <span>–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥</span>
                        <label class="switch">
                            <input type="checkbox" id="voiceInputToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="setting-group">
                    <h3>üë§ 3D –ê–≤–∞—Ç–∞—Ä</h3>
                    <div class="setting-item">
                        <span>–ö–∞—á–µ—Å—Ç–≤–æ –≥—Ä–∞—Ñ–∏–∫–∏</span>
                        <select id="graphicsQuality">
                            <option value="low">–ù–∏–∑–∫–æ–µ</option>
                            <option value="medium" selected>–°—Ä–µ–¥–Ω–µ–µ</option>
                            <option value="high">–í—ã—Å–æ–∫–æ–µ</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <span>–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏</span>
                        <label class="switch">
                            <input type="checkbox" id="emotionsToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="setting-group">
                    <h3>üíæ –î–∞–Ω–Ω—ã–µ</h3>
                    <div class="setting-item">
                        <span>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</span>
                        <label class="switch">
                            <input type="checkbox" id="saveHistoryToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <span>–û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º</span>
                        <button class="btn-secondary" onclick="downloadOfflineData()">
                            üì• –°–∫–∞—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
                        </button>
                    </div>
                    <div class="setting-item">
                        <span>–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</span>
                        <button class="btn-secondary warning" onclick="clearHistory()">
                            üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å
                        </button>
                    </div>
                </div>
                
                <div class="setting-group">
                    <h3>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                    <div class="setting-item">
                        <span>–í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</span>
                        <span>v1.0.0</span>
                    </div>
                    <div class="setting-item">
                        <span>–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</span>
                        <span>–û–±–Ω–æ–≤–ª–µ–Ω–æ: —Å–µ–≥–æ–¥–Ω—è</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-avatar">ü§ñ</div>
            <h3>–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞...</h3>
            <div class="loading-bar">
                <div class="loading-progress" id="loadingProgress"></div>
            </div>
            <p id="loadingText">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ 3D –º–æ–¥–µ–ª–∏...</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>