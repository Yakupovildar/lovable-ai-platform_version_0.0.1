modules = ["python-3.12", "nodejs-20", "web"]

[nix]
channel = "stable-25_05"

[workflows]
runButton = "Start Backend"

[[workflows.workflow]]
name = "Start Backend"
author = 46233810
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd backend && python -m pip install --break-system-packages flask flask-cors flask-socketio spacy && python -m spacy download ru_core_news_sm --break-system-packages 2>/dev/null || echo \"spaCy model already installed\" && python app.py"

[[ports]]
localPort = 5000
externalPort = 80
